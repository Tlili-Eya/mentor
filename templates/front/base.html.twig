<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}MentorAI{% endblock %}</title>
  <meta name="description" content="{% block meta_description %}{% endblock %}">

  <!-- Favicons -->
  <link rel="icon" href="{{ asset('assets/img/favicon.png') }}">
  <link rel="apple-touch-icon" href="{{ asset('assets/img/apple-touch-icon.png') }}">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Raleway&family=Ubuntu&display=swap" rel="stylesheet">

  <!-- Vendor CSS -->
  <link rel="stylesheet" href="{{ asset('assets/vendor/bootstrap/css/bootstrap.min.css') }}">
  <link rel="stylesheet" href="{{ asset('assets/vendor/bootstrap-icons/bootstrap-icons.css') }}">
  <link rel="stylesheet" href="{{ asset('assets/vendor/aos/aos.css') }}">
  <link rel="stylesheet" href="{{ asset('assets/vendor/swiper/swiper-bundle.min.css') }}">

  <!-- Main CSS -->
  <link rel="stylesheet" href="{{ asset('assets/css/main.css') }}">

  <!-- ✅ Notification Badge Styles (Yellow Bell Icon) -->
  <style>
    /* Yellow bell notification badge */
    .notification-bell {
      position: relative;
      display: inline-block;
      margin-left: 8px;
      vertical-align: middle;
    }

    .notification-bell-icon {
      color: #ffc107;
      font-size: 20px;
      animation: bellRing 2s ease-in-out infinite;
      filter: drop-shadow(0 2px 4px rgba(255, 193, 7, 0.4));
    }

    .notification-bell-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      min-width: 18px;
      height: 18px;
      background-color: #dc3545;
      color: white;
      border-radius: 10px;
      font-size: 11px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 5px;
      box-shadow: 0 2px 4px rgba(220, 53, 69, 0.4);
      z-index: 10;
      animation: pulse 2s infinite;
    }

    @keyframes bellRing {
      0%, 100% {
        transform: rotate(0deg);
      }
      10%, 30% {
        transform: rotate(-10deg);
      }
      20%, 40% {
        transform: rotate(10deg);
      }
      50% {
        transform: rotate(0deg);
      }
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
      }
      70% {
        box-shadow: 0 0 0 6px rgba(220, 53, 69, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
      }
    }

    /* Small badge for dropdown items */
    .notification-badge-small {
      display: inline-block;
      min-width: 16px;
      height: 16px;
      background-color: #dc3545;
      color: white;
      border-radius: 8px;
      font-size: 10px;
      font-weight: bold;
      text-align: center;
      line-height: 16px;
      padding: 0 4px;
      margin-left: 5px;
      vertical-align: middle;
    }

    /* Position relative pour le parent du dropdown */
    .navmenu .dropdown > a {
      position: relative;
    }
  </style>

  {% block stylesheets %}{% endblock %}
</head>

<body>

<!-- ======= YOUR ORIGINAL HEADER (UNCHANGED DESIGN) ======= -->
<header id="header" class="header d-flex align-items-center sticky-top">
  <div class="container-fluid container-xl position-relative d-flex align-items-center">

    <a href="{{ path('front_home') }}" class="logo d-flex align-items-center me-auto">
      <img src="{{ asset('assets/img/123.png') }}" alt="MentorAI Logo">
    </a>

    <nav id="navmenu" class="navmenu">
      <ul>
        <li><a href="{{ path('front_home') }}">Home</a></li>
        <li><a href="{{ path('front_course_details') }}">Etude</a></li>
        <li><a href="{{ path('front_blog') }}">Note</a></li>
        
        <li class="dropdown">
          <a href="#">
            <span>Projets</span>
            <i class="bi bi-chevron-down toggle-dropdown"></i>
          </a>
          <ul>
            <li><a href="{{ path('front_projets') }}">Ajout Projet</a></li>
            <li><a href="{{ path('front_mes_projets') }}">Mes Projets</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#">
            <span>Parcour</span>
            <i class="bi bi-chevron-down toggle-dropdown"></i>
          </a>
          <ul>
            <li><a href="{{ path('front_parcours') }}">Ajout Parcour</a></li>
            <li><a href="{{ path('front_mesparcours') }}">Mes Parcours</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#">
            <span>Productivity</span>
            <i class="bi bi-chevron-down toggle-dropdown"></i>
          </a>
          <ul>
            <li><a href="{{ path('front_blog_details') }}">Emplois</a></li>
            <li><a href="{{ path('front_events_index') }}">Défis</a></li>
            <li><a href="{{ path('front_instructor_profile') }}">Instructor Profile</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#">
            <span>contact</span>
            {% set newTreatedCount = get_new_treated_count() %}
            {% if newTreatedCount > 0 %}
              <span class="notification-bell">
                <i class="bi bi-bell-fill notification-bell-icon"></i>
                <span class="notification-bell-badge">{{ newTreatedCount }}</span>
              </span>
            {% endif %}
            <i class="bi bi-chevron-down toggle-dropdown"></i>
          </a>
          <ul>
            <li><a href="{{ path('front_contact') }}">form feedback</a></li>
            <li>
              <a href="{{ path('front_feedback_list') }}">
                Liste des feedbacks
                {% if newTreatedCount > 0 %}
                  <span class="notification-badge-small">{{ newTreatedCount }}</span>
                {% endif %}
              </a>
            </li>
          </ul>
        </li>

        <li><a href="{{ path('front_pricing') }}">Pricing</a></li>
        <li><a href="{{ path('front_about') }}">About</a></li>
      </ul>

      <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
    </nav>

    <a class="btn-getstarted" href="{{ path('front_enroll') }}">Enroll Now</a>

  </div>
</header>
<!-- ======= END HEADER ======= -->

<main class="main">
  {% block body %}{% endblock %}
</main>

<!-- ======= FOOTER (kept global) ======= -->
<footer id="footer" class="footer accent-background">
  <div class="container text-center">
    <p>© {{ "now"|date("Y") }} MentorAI. All Rights Reserved.</p>
  </div>
</footer>

<!-- Scroll Top -->
<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
  <i class="bi bi-arrow-up-short"></i>
</a>

<!-- Preloader -->
<div id="preloader"></div>

<!-- Vendor JS -->
<script src="{{ asset('assets/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
<script src="{{ asset('assets/vendor/aos/aos.js') }}"></script>
<script src="{{ asset('assets/vendor/purecounter/purecounter_vanilla.js') }}"></script>
<script src="{{ asset('assets/vendor/swiper/swiper-bundle.min.js') }}"></script>

<!-- Main JS -->
<script src="{{ asset('assets/js/main.js') }}"></script>

{% block javascripts %}{% endblock %}
</body>
</html>
