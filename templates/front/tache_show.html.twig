{% extends 'front/base.html.twig' %}

{% block title %}DÃ©tails de la tÃ¢che : {{ tache.titre ?? 'Sans titre' }}{% endblock %}

{% block body %}
<div class="container my-5">
  <!-- Bouton retour -->
  <div class="mb-4">
    <a href="{{ path('front_programme_show', {'id': tache.programme.id}) }}"
       class="btn btn-outline-secondary">
      <i class="bi bi-arrow-left me-2"></i> Retour au programme
    </a>
  </div>

  <!-- Card principale -->
  <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
    <div class="card-header bg-primary text-white py-4">
      <h3 class="mb-0 text-center">
        <i class="bi bi-eye me-3"></i>DÃ©tails de la tÃ¢che
      </h3>
    </div>

    <div class="card-body p-4 p-md-5">
      <div class="row g-4">
        <!-- Colonne gauche : infos principales -->
        <div class="col-md-6">
          <h5 class="fw-bold mb-3" style="color: var(--heading-color);">
            Informations gÃ©nÃ©rales
          </h5>

          <dl class="row mb-0">
            <dt class="col-sm-4 text-muted">Titre</dt>
            <dd class="col-sm-8 fw-bold">{{ tache.titre ?? 'â€”' }}</dd>

            <dt class="col-sm-4 text-muted">Ordre</dt>
            <dd class="col-sm-8 fw-bold">{{ tache.ordre ?? 'â€”' }}</dd>

            <dt class="col-sm-4 text-muted">Description</dt>
            <dd class="col-sm-8">
              {{ tache.description|nl2br|default('Aucune description') }}
            </dd>

            <dt class="col-sm-4 text-muted">Ã‰tat</dt>
            <dd class="col-sm-8">
              <span class="badge rounded-pill px-4 py-2 fs-6
                {% if tache.etat.value == 'realisee' %}bg-success text-white
                {% elseif tache.etat.value == 'encours' %}bg-info text-white
                {% elseif tache.etat.value == 'Abandonner' %}bg-danger text-white
                {% else %}bg-secondary text-white{% endif %}">
                {{ tache.etat ? tache.etat.value|capitalize : 'â€”' }}
              </span>
            </dd>

            <dt class="col-sm-4 text-muted">Score</dt>
            <dd class="col-sm-8 fw-bold">{{ tache.score ?? 'â€”' }}</dd>

            <dt class="col-sm-4 text-muted">MÃ©daille</dt>
            <dd class="col-sm-8">
              {% if tache.medaille %}
                <span class="fs-4">
                  {% if tache.medaille.value == 'Or' %}ðŸ¥‡{% elseif tache.medaille.value == 'Argent' %}ðŸ¥ˆ{% else %}ðŸ¥‰{% endif %}
                  {{ tache.medaille.value }}
                </span>
              {% else %}
                â€”
              {% endif %}
            </dd>
          </dl>
        </div>

        <!-- Colonne droite : programme associÃ© -->
        <div class="col-md-6">
          <h5 class="fw-bold mb-3" style="color: var(--heading-color);">
            Programme associÃ©
          </h5>

          <div class="card bg-light border-0 shadow-sm">
            <div class="card-body">
              <h6 class="card-title fw-bold">
                <a href="{{ path('front_programme_show', {'id': tache.programme.id}) }}" class="text-decoration-none">
                  {{ tache.programme.titre ?? 'Programme sans titre' }}
                </a>
              </h6>
              <p class="card-text text-muted">
                GÃ©nÃ©rÃ© le {{ tache.programme.dategeneration|date('d/m/Y') }}
              </p>
              <a href="{{ path('front_programme_show', {'id': tache.programme.id}) }}"
                 class="btn btn-outline-primary btn-sm mt-2">
                Voir le programme complet
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}